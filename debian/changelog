oxide-qt (1.3.2-0ubuntu1) utopic; urgency=medium

  * Update to v1.3.2
    - Bump Chromium rev to 39.0.2171.36
    - Fix LP: #1260016 - Add support for application provided protocol
      handlers
    - Fix LP: #1301681 - Scroll the focused editable node in to view after
      a resize
    - Fix LP: #1337506 - Runtime abort with
      FATAL:texture_manager.cc(76)] Check failed: texture_count_ == 0u (1 vs. 0).
      Ensure that we keep the browser compositor GL context and associated
      resources alive as long as the Qt scenegraph holds the frontbuffer
    - Fix LP: #1377755 - Keyboard disappears when switching between text fields
    - Fix LP: #1290821 - WebView.loading is not false when receiving a LoadEvent
      with type == TypeStopped, so properties bound to this never receive an
      update. As "loading" and the main-frame document load events are delivered
      separately from blink, split this in to 2 signals
    - Fix LP: #1354382 - White line at bottom of viewport - fix rounding errors
      when calculating the view size in DIP which results in the view
      underflowing by a pixel in one axis and overflowing by a pixel in the
      other axis
    - Fix LP: #1221996 - Allow user scripts to be injected in to the main world
    - Expose redirect events to WebContextDelegateWorker
    - Fix LP: #1384460 - Delegate unhandled URL schemes to the system
    - Fix LP: #1386468 - Stop leaking V8 contexts

  [ Chris Coulson <chris.coulson@canonical.com> ]
  * Add liboxideqtquick0 package
  * Refresh debian/patches/gross-hack-for-dual-ffmpeg-build.patch
  * Add libcups2-dev and libexif-dev build-deps, as the chromedriver build
    seems to pull them in. This is a temporary measure until we can figure
    out why

  [ Alexandre Abreu <alexandre.abreu@canonical.com> ]
  * Add chromedriver to the packaging branch

 -- Chris Coulson <chris.coulson@canonical.com>  Thu, 23 Oct 2014 08:18:19 -0400

oxide-qt (1.2.5-0ubuntu1) utopic; urgency=medium

  * Update to v1.2.5
    - see USN-2345-1
    - Bump Chromium rev to 38.0.2125.101

 -- Chris Coulson <chris.coulson@canonical.com>  Tue, 14 Oct 2014 12:39:07 +0100

oxide-qt (1.2.4-0ubuntu1) utopic; urgency=medium

  * Update to v1.2.4
    - Fix LP: #1352631 - Turn on accelerated canvas on krillin

 -- Chris Coulson <chris.coulson@canonical.com>  Fri, 26 Sep 2014 11:13:36 +0100

oxide-qt (1.2.2-0ubuntu1) utopic; urgency=medium

  * Update to v1.2.2
    - Bump Chromium rev to 38.0.2125.77
    - Fix LP: #1324292 - Disable the touch editing mechanism to avoid
      breaking the webbrowser-app user script
    - Fix LP: #1362543 - Web application fails to load properly every other
      time. Ensure that when a new cache is created, the initial cache stats
      are stored to permanent storage immediately to avoid the cache being
      left in an inconsistent state if the process exits uncleanly before
      the stats are updated
    - Fix LP: #1371166 - Geolocation fails when the location source returns
      invalid values for some attributes
    - Fix LP: #1372414 - SSL certificates report incorrect dates because
      Chromium's base::Time measures milliseconds since the Windows epoch

 -- Chris Coulson <chris.coulson@canonical.com>  Thu, 25 Sep 2014 15:32:47 +0100

oxide-qt (1.2.1-0ubuntu1) utopic; urgency=medium

  * Update to v1.2.1
    - Bump Chromium rev to 38.0.2125.58
    - Fix LP: #1260048 - Don't initialize NSS with a user DB for now
    - Fix LP: #1368117 - WebView.blockedContent doesn't get updated after
      a reload, because whilst the browser-side state is cleared when a
      navigation is committed, the renderer-side state is not cleared on a
      reload
    - Fix a null pointer deref for non-overridable SSL errors
    - Fix LP: #1368385 - Make all subframe and subresource SSL errors non-
      overridable, as overriding them doesn't always result in the security
      status API indicating a degraded security level
    - Fix LP: #1367446 - Ensure WebView.securityStatus.certificate is cleared
      when navigating away from a HTTPS url

 -- Chris Coulson <chris.coulson@canonical.com>  Fri, 12 Sep 2014 08:59:12 +0100

oxide-qt (1.2.0-0ubuntu1) utopic; urgency=medium

  * Update to v1.2.0
    - Bump Chromium rev to 38.0.2125.24
    - Add WebContext.devtoolsBindIp property
    - Refactor the various BrowserContext classes to avoid having to modify
      2 implementations of BrowserContext each time we add functionality that's
      shared between the normal and OTR contexts
    - Assert that BrowserContext is only accessed on the main thread
    - Fix LP: #1224707 - Use a localized Accept-Language header
    - Fix various threading issues in the interaction of WebContext and
      WebContextDelegateWorker
    - Don't leak the default WebPreferences object when setting a custom one
    - Make certificate revocation checking work properly, which is also
      required for EV to work. Also fixes some console spew (LP: #1240723)
    - Fix LP: #1361868 - Don't leak GeolocationPermissionRequest if there are
      no handlers on WebView.geolocationPermissionRequested
    - Fix LP: #1214034:
      + Add API's to query the security status of the webview
        (WebView.securityStatus property + SecurityStatus and SslCertificate
        classes)
      + Add WebView.certificateError signal and CertificateError class to
        give the application a chance to allow certain SSL errors (some errors
        are non-overridable and this is enforced by Oxide - in which case, the
        signal only acts as a notification)
      + Add WebView.blockedContent property, which is a bitmask of content
        types that have currently been blocked - currently this only indicates
        MixedDisplay and MixedScript, but will be extended later on for other
        content types (eg, cookies, popups etc)
      + Add WebView.setCanTemporarily{Display,Run}InsecureContent functions,
        which allows the mixed content blocker preferences to be overridden
        temporarily (will reset on navigation to a new page)
    - Fix LP: #1355703 - Linkedin profiles don't render correctly because
      it triggers the mixed content blocker. Change the default for
      WebPreferences.canDisplayInsecureContent to true to allow secure sites
      to display insecure content. We can do this now we have a security
      status API, as displaying insecure content results in
      SecurityStatus.securityLevel indicating a degraded level. This is the
      same default as Chrome. Note, insecure scripts are still blocked by
      default
    - Various fixes to the CookieManager API:
      - Ensure that requests don't always get the same request ID
      - Don't depend on undefined behaviour (signed integer overflow)
      - Chromium can run callbacks for cookie requests synchronously - take
        this in to account to avoid potentially hidden reentrancy issues
      - Ensure that the responses at the API level always happen asynchronously
      - Make it possible to set a session cookie instead of setting the expiry
        to the Unix epoch when an expiration date isn't specifed (which then
        gets rejected by Chromium for being already expired)
      - Ensure that session cookies returned from the API don't have an expiry
        date set to the Unix epoch (LP: #1362558)
      - Rename CookieManager.gotCookies to CookieManager.getCookiesResponse and
        CookieManager.cookiesSet to CookieManager.setCookiesResponse
      - CookieManager.getCookiesResponse no longer returns a status code.
        The only time getCookies can fail is before WebContext is fully
        initialized, which we can indicate synchronously by returning an
        invalid request ID
      - CookieManager.getCookies() has been added so that it's possible to
        request the cookies for a specific URL
      - The cookie expirationdate attribute now accepts QML's built-in Date
        type
      - URL parameters in the API are now QUrl rather than QString
      - When the response to setCookies indicates an error it's impossible
        to know which cookies failed to set. Get rid of the status parameter
        from CookieManager.setCookiesResponse and replace it with a list
        of failed cookies instead
  * Refresh debian/patches/gross-hack-for-dual-ffmpeg-build.patch
  * Add /usr/share/locale to liboxideqtcore0.install

 -- Chris Coulson <chris.coulson@canonical.com>  Wed, 03 Sep 2014 15:31:16 +0100

oxide-qt (1.2.0~bzr683-0ubuntu1) utopic; urgency=medium

  * Update to snapshot r683 from trunk
    - Bump Chromium rev to 38.0.2114.2
    - Don't modify Chromium's EGL implementation to select the GLES API when
      creating contexts and calling eglMakeCurrent. These calls all happen
      on a dedicated GPU thread with no application code running on it, and
      the selected API is thread-local. We do still need to temporarily select
      GLES at startup where we make the first few calls on the UI thread,
      but we restore the originally selected API once done (only affects
      Unity 8 desktop)
    - Fix LP: #1286204 - Make double-tap-to-zoom work
    - Adjust ui::ScaleGestureDetector::Config::min_pinch_update_span_delta to
      remove the coarseness when pinching
    - Fix LP: #1285750 - Add support for building a chromedriver binary
    - Add OXIDE_DISABLE_SETUID_SANDBOX and OXIDE_DISABLE_SECCOMP_FILTER_SANDBOX
      environment variables
    - Assert we have a QGuiApplication on startup
    - Fix LP: #1347924 - QProcess::waitForFinished() hangs - stop using
      ContentMainRunner for starting the browser code - it does things with
      process global state that are unexpected in a public library (eg,
      setting the SIGCHLD handler to the default which breaks QProcess because
      it relies on its own custom handler). We do still set the SIGPIPE action
      to SIG_IGN, but only if it is SIG_DFL when we start. We also abort if the
      SIGCHLD action is SIG_IGN when we initialize
    - Fix LP: #1352952 - Ensure files returned by the file picker exist
    - Fix LP: #1349510 - Browser crashes when attaching a photo in GMail -
      when checking for an override for navigator.userAgent, limit the length
      of the URL sent across IPC by trimming off the fragment, username and
      password
    - Add WebContext.cookieManager API
  * Refresh debian/patches/gross-hack-for-dual-ffmpeg-build.patch

 -- Chris Coulson <chris.coulson@canonical.com>  Tue, 12 Aug 2014 15:01:03 +0100

oxide-qt (1.1.1-0ubuntu3) utopic; urgency=medium

  * Update to v1.1.1
    - Bump Chromium rev to 37.0.2062.58
    - Fix LP: #1337389 - Make ContentBrowserClient::CanCreateWindow work
      again
    - Fix LP: #1332996 - QtCreator often halts for a minute. Don't crash on
      Qt platforms that don't implement QPlatformNativeInterface. As we can't
      get a native display handle on these platforms, disallow any GL
      implementation in Chromium and guard against accesses to
      BrowserProcessMain::GetNativeDisplay()
  * Build with GCC 4.8 for now because GCC 4.9 breaks web content layout on
    the device, which sucks quite a lot right before RTM
    - update debian/rules
    - update debian/control

 -- Chris Coulson <chris.coulson@canonical.com>  Thu, 31 Jul 2014 10:41:43 +0100

oxide-qt (1.1.0-0ubuntu1) utopic; urgency=medium

  * Update to v1.1.0
    - Bump Chromium rev to 37.0.2062.44
    - Fix LP: #1337338 - Don't crash when destroying a visible RWHV, which
      happens when a render process crashes
    - Fix LP: #1337890 - Update the power save blocker to use the Unity API
      on touch devices
    - Fix LP: #1338639 - Don't crash when calling WebView.loadHtml() before
      the webview is fully constructed

 -- Chris Coulson <chris.coulson@canonical.com>  Tue, 29 Jul 2014 15:00:10 +0100

oxide-qt (1.1.0~bzr640-0ubuntu1) utopic; urgency=medium

  * Update to trunk snapshot r640
    - Bump Chromium to 37.0.2062.3
    - Fix LP: #1244373 - Screen blanks during video playback. Use the powerd
      API for now on the device
    - Fix LP: #1259216 - Expose WebView.icon property
    - Fix LP: #1282063 - Add WebView.downloadRequested API
    - Fix LP: #1307709 - webbrowser-app doesn't start in Unity 8 desktop
      preview session. Fix this by using surfaceless EGL (pbuffers not supported
      in the Mir EGL platform for mesa) and ensuring we always bind the
      GLES API on Chromium's GPU thread
    - Fix LP: #1312082 - Stop using deprecated compositing paths in Chromium
    - Fix LP: #1323743 - OSK doesn't display after some time. Add a workaround
      for this in Oxide for the time being
    - Fix LP: #1324909 - User agent string is incorrect in newly opened
      webviews and subframes
    - Fix LP: #1332754 - Allow the frontbuffer and delegated frame data for
      hidden webviews to be evicted
    - Fix LP: #1252302 - Add devtools support
    - Fix LP: #1312081 - Render content and handle input events directly in
      the WebView, rather than having a per-process RenderViewItem
    - Fix LP: #1330511 - Expose a Flickable-like API on WebView
    - An empty preedit string in IM events doesn't mean we should do a commit.
      Fixes an issue where deleting the last character of a composition does
      a commit instead, causing the deletion to appear to fail
    - Notify the IM of updates to cursor and anchor positions
  * Refresh debian/patches/gross-hack-for-dual-ffmpeg-build.patch

 -- Chris Coulson <chris.coulson@canonical.com>  Thu, 03 Jul 2014 09:52:30 +0100

oxide-qt (1.0.2-0ubuntu3) utopic; urgency=medium

  * Rebuild against Qt 5.3.0
  * Change maintainer to Ubuntu Developers

 -- Timo Jyrinki <timo-jyrinki@ubuntu.com>  Wed, 18 Jun 2014 05:49:32 +0000

oxide-qt (1.0.2-0ubuntu2) utopic; urgency=medium

  * Update to v1.0.2
    - Bump Chromium to 36.0.1985.49
    - Add experimental support for the Google Talk PPAPI plugin, to support
      Google Hangouts. This is hidden behind an environment variable that
      defaults to off (LP: #1308397)
    - Fix crash in oxide::GetFormFactorHint() on Unity 8 desktop preview
      (LP: #1308398)
    - Fix various issues in GPU related code, including a crash (LP: #1308412)
    - Set no_javascript_access in ContentBrowserClient::CanCreateWindow()
      to fix random window opening failures (LP: #1307735)
    - Add fullscreen API to WebView (LP: #1308947)
    - Set a wait cursor when loading
    - Add geolocation support
    - Add a WebView.geolocationPermissionRequested API
    - Allow unhandled key events to bubble up from the WebView (LP: #1313727)
    - Don't generate keypress events with unmodified text for control
      characters. This makes Oxide behave more like Chrome
    - Add WebView.loadHtml() (LP: #1320848)
    - Ensure we update the visibility in a renderer when a WebView is created
      initially hidden and then made visible before any content is loaded
      (LP: #1322622)
    - Build fixes for Qt 5.3
    - Display controls in media player (LP: #1326852)
  * Refresh debian/patches/gross-hack-for-dual-ffmpeg-build.patch
  * Don't build with ENABLE_OXIDEQMLSCENE now, as that's the default
    - update debian/rules
  * Update build dependencies - we now depend on ninja

 -- Chris Coulson <chris.coulson@canonical.com>  Wed, 16 Apr 2014 09:54:56 +0100

oxide-qt (1.0.0~bzr501-0ubuntu1) trusty; urgency=medium

  * Update to r501
    - Update to Chromium 35.0.1916.27
    - Use GpuDataManager for checking feature support before enabling
      compositing (although, there's no GPU blacklist support yet)
    - When resizing in non-compositing mode, handle the case where a site is
      slow to repaint and Chromium gives us a backing store for the old size
    - In compositing mode, make sure we composite during resizes
    - Fix a crash during resize caused by us sending more than one acknowledge
      for a buffer swap
  * Don't advertise support for codecs that aren't supported by the
    oxideqt-codecs* package installed
    - add debian/patches/gross-hack-for-dual-ffmpeg-build.patch

 -- Chris Coulson <chris.coulson@canonical.com>  Thu, 10 Apr 2014 20:44:06 +0100

oxide-qt (1.0.0~bzr490-0ubuntu1) trusty; urgency=medium

  * Update to r490
    - Build with enable_plugins: 0 and toolkit_views: 0 to trim the size
      a bit
    - Ensure subframe navigations that require a new window become top-level
      navigations for webviews that don't implement WebView.newViewRequested
    - Add an option for enabling proprietary codecs (ENABLE_PROPRIETARY_CODECS)
    - Build and install the l10n pak files
    - Add file picker support (LP: #1260008)
    - Add some resources to oxide.pak that were missing (eg, directory listing
      HTML)
    - Fix a crash that occurs when handling events from some mouse buttons
    - Add cursor support (LP: #1257662)
    - Reimplement Chromium's RenderSandboxHostLinux so that it runs the sandbox
      IPC helper process as a proper child process rather than just forking
      the browser process, which is dangerous for Oxide (LP: #1304648)
  * Split libffmpegsumo.so in to 2 separate packages (oxideqt-codecs and
    oxideqt-codecs-extra) (LP: #1301341)

 -- Chris Coulson <chris.coulson@canonical.com>  Tue, 08 Apr 2014 15:27:09 +0100

oxide-qt (1.0.0~bzr475-0ubuntu1) trusty; urgency=medium

  * Update to r475
    - Update to Chromium 35.0.1916.6
    - If WebView.newViewRequested isn't implemented, navigations should happen
      in the originating view
    - Refine WebView.newViewRequested and WebView.navigationRequested API's
      (LP: #1300891)
    - Improve the form factor detection (LP: #1301678)
    - Add WebView.javaScriptConsoleMessage signal to allow the application
      to intercept console messages from content (LP: #1291389)
    - Improve the LoadEvent API
    - Fix an abort when setting WebContext.sessionCookieMode on a context
      that has no path (LP: #1301650)
    - Expose the default WebContext via Oxide.defaultWebContext() (LP: #1297552)
    - Send fake keydown and keyup events when composing text with an
      input method (LP: #1300382)
    - Bump the API version to 1.0

 -- Chris Coulson <chris.coulson@canonical.com>  Fri, 04 Apr 2014 19:28:27 +0100

oxide-qt (1.0.0~bzr452-0ubuntu1) trusty; urgency=medium

  * Update to r452
    - Add WebView.newViewRequested API (LP: #1240749)
    - Add WebView.navigationRequested API (LP: #1259219)
    - Turn off WebCore debug symbols on native ARM builds, because we keep
      hitting linker OOM conditions. These are also omitted from our
      Chromium builds
    - Don't ignore WebContext.cachePath (LP: #1298264)
    - Add WebContext.sessionCookieMode API

 -- Chris Coulson <chris.coulson@canonical.com>  Tue, 01 Apr 2014 13:13:51 +0100

oxide-qt (1.0.0~bzr448-0ubuntu1) trusty; urgency=medium

  [ Chris Coulson ]
  * Update to r447
    - Rebase on Chromium 35.0.1908.4
    - Add support for JS dialogs (LP: #1214035)
    - Don't delete an active popup menu when another view is deleted
      (LP: #1257663)
    - Fix an invalid read and a memory corruption bug found by Valgrind
    - Chromium needs to create GLX contexts with idenitcal attributes to
      the GLX context created by Qt (LP: #1300284)

  [ Jamie Strandboge ]
  * merge debian/changelog and debian/changelog.chromium to be more clear
    (LP: #1297020)

 -- Chris Coulson <chris.coulson@canonical.com>  Fri, 28 Mar 2014 13:23:13 +0000

oxide-qt (1.0.0~bzr437-0ubuntu1) trusty; urgency=low

  * Initial upload

 -- Chris Coulson <chris.coulson@canonical.com>  Mon, 24 Mar 2014 16:41:47 +0000
