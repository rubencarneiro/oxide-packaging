Index: oxide-qt-1.10.0/CMakeLists.txt
===================================================================
--- oxide-qt-1.10.0.orig/CMakeLists.txt	2015-09-29 10:01:49.360247086 +0100
+++ oxide-qt-1.10.0/CMakeLists.txt	2015-09-29 10:01:49.352247085 +0100
@@ -113,7 +113,7 @@
   list(APPEND _GYP_COMMAND -Dproprietary_codecs=1)
 else()
   list(APPEND _GYP_COMMAND -Dffmpeg_branding=Chromium)
-  list(APPEND _GYP_COMMAND -Dproprietary_codecs=0)
+  list(APPEND _GYP_COMMAND -Dproprietary_codecs=1)
 endif()
 if(DEFINED ENABLE_PLUGINS AND ENABLE_PLUGINS EQUAL 0)
   list(APPEND _GYP_COMMAND -Denable_plugins=0)
Index: oxide-qt-1.10.0/shared/renderer/oxide_content_renderer_client.cc
===================================================================
--- oxide-qt-1.10.0.orig/shared/renderer/oxide_content_renderer_client.cc	2015-09-29 10:01:49.360247086 +0100
+++ oxide-qt-1.10.0/shared/renderer/oxide_content_renderer_client.cc	2015-09-29 10:02:30.772252574 +0100
@@ -49,6 +49,12 @@
 #include "media/oxide_web_media_player.h"
 #endif
 
+#if defined(USE_PROPRIETARY_CODECS)
+#include "media/base/mime_util.h"
+#include "media/ffmpeg/ffmpeg_common.h"
+#include "media/filters/ffmpeg_glue.h"
+#endif
+
 namespace oxide {
 
 void ContentRendererClient::RenderThreadStarted() {
@@ -69,6 +75,14 @@
   // Oxide does not support NavigatorContentUtils.
   // See https://launchpad.net/bugs/1214046
   blink::WebRuntimeFeatures::enableNavigatorContentUtils(false);
+
+#if defined(USE_PROPRIETARY_CODECS)
+  media::FFmpegGlue::InitializeFFmpeg();
+  if (!avcodec_find_decoder(AV_CODEC_ID_H264)) {
+    DVLOG(1) << "Proprietary codecs are not installed";
+    media::RemoveProprietaryMediaTypesAndCodecsForTests();
+  }
+#endif
 }
 
 void ContentRendererClient::RenderFrameCreated(
Index: oxide-qt-1.10.0/shared/shared.gyp
===================================================================
--- oxide-qt-1.10.0.orig/shared/shared.gyp	2015-09-29 10:01:49.360247086 +0100
+++ oxide-qt-1.10.0/shared/shared.gyp	2015-09-29 10:01:49.352247085 +0100
@@ -246,6 +246,7 @@
         '<(DEPTH)/mojo/mojo_base.gyp:mojo_environment_chromium',
         '<(DEPTH)/net/net.gyp:net',
         '<(DEPTH)/skia/skia.gyp:skia',
+        '<(DEPTH)/third_party/ffmpeg/ffmpeg.gyp:ffmpeg',
         '<(DEPTH)/third_party/khronos/khronos.gyp:khronos_headers',
         '<(DEPTH)/third_party/libXNVCtrl/libXNVCtrl.gyp:libXNVCtrl',
         '<(DEPTH)/third_party/mojo/mojo_edk.gyp:mojo_system_impl',
