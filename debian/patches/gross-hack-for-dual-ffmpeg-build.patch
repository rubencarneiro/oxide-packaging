Index: oxide-qt-1.4.0/CMakeLists.txt
===================================================================
--- oxide-qt-1.4.0.orig/CMakeLists.txt	2015-01-12 18:32:55.436412465 +0000
+++ oxide-qt-1.4.0/CMakeLists.txt	2015-01-12 18:32:55.432412469 +0000
@@ -139,7 +139,7 @@
   list(APPEND _GYP_COMMAND -Dproprietary_codecs=1)
 else()
   list(APPEND _GYP_COMMAND -Dffmpeg_branding=Chromium)
-  list(APPEND _GYP_COMMAND -Dproprietary_codecs=0)
+  list(APPEND _GYP_COMMAND -Dproprietary_codecs=1)
 endif()
 if(DEFINED ENABLE_PLUGINS AND ENABLE_PLUGINS EQUAL 0)
   list(APPEND _GYP_COMMAND -Denable_plugins=0)
Index: oxide-qt-1.4.0/third_party/chromium/src/content/renderer/renderer_blink_platform_impl.cc
===================================================================
--- oxide-qt-1.4.0.orig/third_party/chromium/src/content/renderer/renderer_blink_platform_impl.cc	2015-01-12 18:32:55.436412465 +0000
+++ oxide-qt-1.4.0/third_party/chromium/src/content/renderer/renderer_blink_platform_impl.cc	2015-01-12 18:32:55.432412469 +0000
@@ -124,6 +124,12 @@
 #include "content/renderer/media/webrtc/peer_connection_dependency_factory.h"
 #endif
 
+#if defined(USE_PROPRIETARY_CODECS)
+#include "media/ffmpeg/ffmpeg_common.h"
+#include "media/filters/ffmpeg_glue.h"
+#include "third_party/ffmpeg/ffmpeg_stubs.h"
+#endif
+
 using blink::Platform;
 using blink::WebAudioDevice;
 using blink::WebBlobRegistry;
@@ -412,6 +418,15 @@
   if (!net::IsSupportedMediaMimeType(mime_type_ascii))
     return IsNotSupported;
 
+#if defined(USE_PROPRIETARY_CODECS)
+  media::FFmpegGlue::InitializeFFmpeg();
+  if (net::IsProprietaryMediaMimeType(mime_type_ascii) &&
+      !avcodec_find_decoder(AV_CODEC_ID_H264)) {
+    DVLOG(1) << "Proprietary codecs are not installed";
+    return IsNotSupported;
+  }
+#endif
+
   if (!key_system.isEmpty()) {
     // Check whether the key system is supported with the mime_type and codecs.
 
@@ -459,6 +474,16 @@
   net::ParseCodecString(ToASCIIOrEmpty(codecs), &parsed_codec_ids, false);
   if (mime_type_ascii.empty())
     return false;
+
+#if defined(USE_PROPRIETARY_CODECS)
+  media::FFmpegGlue::InitializeFFmpeg();
+  if (net::IsProprietaryMediaMimeType(mime_type_ascii) &&
+      !avcodec_find_decoder(AV_CODEC_ID_H264)) {
+    DVLOG(1) << "Proprietary codecs are not installed";
+    return false;
+  }
+#endif
+
   return media::StreamParserFactory::IsTypeSupported(
       mime_type_ascii, parsed_codec_ids);
 }
Index: oxide-qt-1.4.0/third_party/chromium/src/net/base/mime_util.cc
===================================================================
--- oxide-qt-1.4.0.orig/third_party/chromium/src/net/base/mime_util.cc	2015-01-12 18:32:55.436412465 +0000
+++ oxide-qt-1.4.0/third_party/chromium/src/net/base/mime_util.cc	2015-01-12 18:32:55.436412465 +0000
@@ -1384,6 +1384,15 @@
   return file_type != CERTIFICATE_MIME_TYPE_UNKNOWN;
 }
 
+bool IsProprietaryMediaMimeType(const std::string& mime_type) {
+  for (size_t i = 0; i < arraysize(proprietary_media_types); ++i) {
+    if (mime_type == proprietary_media_types[i]) {
+      return true;
+    }
+  }
+  return false;
+}
+
 void AddMultipartValueForUpload(const std::string& value_name,
                                 const std::string& value,
                                 const std::string& mime_boundary,
Index: oxide-qt-1.4.0/third_party/chromium/src/net/base/mime_util.h
===================================================================
--- oxide-qt-1.4.0.orig/third_party/chromium/src/net/base/mime_util.h	2015-01-12 18:32:55.436412465 +0000
+++ oxide-qt-1.4.0/third_party/chromium/src/net/base/mime_util.h	2015-01-12 18:32:55.436412465 +0000
@@ -46,6 +46,8 @@
 NET_EXPORT bool IsSupportedJavascriptMimeType(const std::string& mime_type);
 NET_EXPORT bool IsSupportedCertificateMimeType(const std::string& mime_type);
 
+NET_EXPORT bool IsProprietaryMediaMimeType(const std::string& mime_type);
+
 // Convenience function.
 NET_EXPORT bool IsSupportedMimeType(const std::string& mime_type);
 
Index: oxide-qt-1.4.0/third_party/chromium/src/content/content_renderer.gypi
===================================================================
--- oxide-qt-1.4.0.orig/third_party/chromium/src/content/content_renderer.gypi	2015-01-12 18:32:55.436412465 +0000
+++ oxide-qt-1.4.0/third_party/chromium/src/content/content_renderer.gypi	2015-01-12 18:32:55.436412465 +0000
@@ -22,6 +22,7 @@
     '../net/net.gyp:net',
     '../skia/skia.gyp:skia',
     '../storage/storage_common.gyp:storage_common',
+    '../third_party/ffmpeg/ffmpeg.gyp:ffmpeg',
     '../third_party/WebKit/public/blink.gyp:blink',
     '../third_party/icu/icu.gyp:icui18n',
     '../third_party/icu/icu.gyp:icuuc',
